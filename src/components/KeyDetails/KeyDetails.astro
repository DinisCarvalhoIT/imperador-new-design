---
import { Image } from "astro:assets";
import keyDetailsImage from "../../../public/KeyDetails/Rectangle.png";
import logoImperador from "../../../public/HomePage/logoImperador.svg";
import beachIcon from "../../../public/KeyDetails/beach.svg";
import building from "../../../public/KeyDetails/building.svg";
import coffee from "../../../public/KeyDetails/coffee.svg";
import gym from "../../../public/KeyDetails/gym.svg";
import pharmacy from "../../../public/KeyDetails/pharmacy.svg";
import bus from "../../../public/KeyDetails/bus.svg";
import { getLangFromUrl, useTranslations } from "../../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const dataKeyDetails = [
  {
    title: t("keydetails.beach.title"),
    description: t("keydetails.beach.description"),
    secondDescription: t("keydetails.beach.second_description"),
    svgPath: beachIcon,
  },
  {
    title: t("keydetails.shopping.title"),
    description: t("keydetails.shopping.description"),
    secondDescription: t("keydetails.shopping.second_description"),
    svgPath: building,
  },
  {
    title: t("keydetails.restaurants.title"),
    description: t("keydetails.restaurants.description"),
    secondDescription: t("keydetails.restaurants.second_description"),
    svgPath: coffee,
  },
  {
    title: t("keydetails.gyms.title"),
    description: t("keydetails.gyms.description"),
    svgPath: gym,
  },
  {
    title: t("keydetails.hospital.title"),
    description: t("keydetails.hospital.description"),
    svgPath: pharmacy,
  },
  {
    title: t("keydetails.transport.title"),
    description: t("keydetails.transport.description"),
    svgPath: bus,
  },
];
---

<section
  class="w-full min-h-screen flex flex-col items-center justify-center relative"
>
  <div class="absolute inset-0 w-full h-full -z-10">
    <Image
      src={keyDetailsImage}
      alt="Floor Plans"
      class="w-full h-full object-cover"
    />
    <div
      class="absolute inset-0 w-full h-full"
      style="background: linear-gradient(359.44deg, rgba(11, 29, 38, 0) 0.43%, #092635 99.46%); transform: rotate(-180deg);"
    >
    </div>
    <div
      class="absolute inset-0 w-full h-full"
      style="background: linear-gradient(359.44deg, rgba(11, 29, 38, 0) 0.43%, rgba(9, 38, 53, 0.9) 99.46%);"
    >
    </div>
  </div>

  <div
    class="z-10 flex flex-col items-center gap-8 md:gap-12 px-4 py-8 md:py-12 max-w-7xl mx-auto"
  >
    <Image
      src={logoImperador}
      alt={t("keydetails.logo_alt")}
      class="w-48 md:w-56 lg:w-64 h-auto"
    />

    <div class="grid grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 w-full">
      {
        dataKeyDetails.map((item) => {
          let imageClass = "";
          
          if (item.svgPath === beachIcon) {
            imageClass = "keydetails-beach-icon w-[33.15px] md:w-[66.39px] h-auto";
          } else if (item.svgPath === building) {
            imageClass = "keydetails-building-icon w-[40.18px] md:w-[80.47px] h-auto";
          } else if (item.svgPath === coffee) {
            imageClass = "keydetails-coffee-icon w-[33.38px] md:w-[66.86px] h-auto";
          } else if (item.svgPath === gym) {
            imageClass = "keydetails-gym-icon w-[39px] md:w-[79px] h-auto";
          } else if (item.svgPath === pharmacy) {
            imageClass = "keydetails-pharmacy-icon w-[33px] md:w-[65px] h-auto";
          } else if (item.svgPath === bus) {
            imageClass = "keydetails-bus-icon w-[47.32px] md:w-[95px] h-auto";
          }
          
          return (
            <div class="flex flex-col items-center text-center p-4 md:p-6">
              {/* Fixed height icon container for alignment */}
              <div class="h-[50px] md:h-[100px] flex items-end justify-center mb-3">
                <Image
                  src={item.svgPath}
                  alt={item.title}
                  class={imageClass}
                />
              </div>
              {/* Fixed height title container for alignment */}
              <div class="h-[28px] md:h-[32px] flex items-center justify-center mb-1.5">
                <h3 class="text-xl md:text-2xl font-medium text-[#B8C6CD] font-montserrat leading-tight tracking-[0.03em]">
                  {item.title}
                </h3>
              </div>
              {/* Description container */}
              <div class="text-sm md:text-base text-white font-montserrat min-h-[40px] md:min-h-[48px] tracking-[0.05em]">
                <p class="-mb-1">{item.description}</p>
                {item.secondDescription && <p class="-mt-1">{item.secondDescription}</p>}
              </div>
            </div>
          );
        })
      }
    </div>
  </div>
</section>
