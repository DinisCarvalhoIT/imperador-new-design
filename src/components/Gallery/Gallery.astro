---
import { getLangFromUrl, useTranslations } from "@/i18n/utils";
import { getImage } from "astro:assets";
import GalleryGrid from "./GalleryGrid";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Import gallery images
import gallery1Img from "../../../public/gallery/Imperador_Interior1.jpg";
import gallery2Img from "../../../public/gallery/Imperador_Interior2.jpg";
import gallery3Img from "../../../public/gallery/Imperador_Interior3.jpg";
import gallery4Img from "../../../public/gallery/Imperador_Interior4.jpg";
import gallery5Img from "../../../public/gallery/Imperador_Interior5.jpg";
import gallery6Img from "../../../public/gallery/Imperador_Interior6.jpg";
import gallery7Img from "../../../public/gallery/Imperador_Interior7.jpg";
import gallery8Img from "../../../public/gallery/Imperador_Interior8.jpg";
import gallery9Img from "../../../public/gallery/Imperador_Interior9.jpg";
import gallery10Img from "../../../public/gallery/Imperador_Interior10.jpg";
import gallery11Img from "../../../public/gallery/Imperador_Interior11.jpg";
import gallery12Img from "../../../public/gallery/Imperador_Interior12.jpg";
import gallery13Img from "../../../public/gallery/Imperador_Interior13.jpg";
import gallery14Img from "../../../public/gallery/Imperador_Interior14.jpg";
import gallery15Img from "../../../public/gallery/Imperador_Interior15.jpg";
import gallery16Img from "../../../public/gallery/Imperador_Interior16.jpg";
import gallery17Img from "../../../public/gallery/Imperador_Interior17.jpg";

const imageSources = [gallery1Img, gallery2Img, gallery3Img, gallery4Img, gallery5Img, gallery6Img, gallery7Img, gallery8Img, gallery9Img, gallery10Img, gallery11Img, gallery12Img, gallery13Img, gallery14Img, gallery15Img, gallery16Img, gallery17Img];

// Process images to webp and get URLs for React component
const getImageUrl = async (image: any) => {
  const processed = await getImage({
    src: image,
    format: "webp",
    width: 1520,
    height: 820,
    quality: 90,
  });
  return processed.src;
};

// Process all images to get URLs for the carousel
const galleryImages = await Promise.all(
  imageSources.map(img => getImageUrl(img))
);
---

<section
  class=" w-full bg-[#0B1D26]"
  id="gallery"
>
  <div class="w-full mx-auto px-4 py-16 md:px-8 lg:px-[134px]">
    {/* Section Header */}
    <div class="text-center mb-8 md:mb-12">
      <div class="font-montserrat text-[#FBD784] uppercase text-[14px] md:text-[16px] lg:text-[18px] tracking-[4px] md:tracking-[6px] mb-4">
        {t("gallery.tagline")}
      </div>
      <h2 class="font-playfairDisplay text-[36px] md:text-[48px] lg:text-[58px] leading-[44px] md:leading-[56px] lg:leading-[68px] text-white text-center">
        {t("gallery.title")}
      </h2>
    </div>

    {/* Gallery Grid - Masonry Layout with Dialog */}
    <GalleryGrid client:load images={galleryImages} />
  </div>
</section>
